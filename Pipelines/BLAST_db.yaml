Global_params:
    Default_wait: 10
    Qsub_opts: -V -cwd
    Qsub_q: bioinfo.q
    module_path: C:\Users\sklarz.BGU-USERS\Documents\python_pipeline_gitlab\python_pipeline\additional_modules\additional_modules_release_1.1.0
Vars:
    paths:
        prokka:         /path/to/prokka
        makeblastdb:    /path/to/makeblastdb
        tblastn:        /path/to/tblastn
        parse_blast:    Rscript /path/to/parse_blast.R
        compare_blast_parsed_reports:    Rscript /path/to/compare_blast_parsed_reports.R
    databases:
        gene_list:  
            fasta:  /path/to/gene_list.fasta
            table:  /path/to/gene_list.tsv
Step_params:
    merge1:
        module: merge
        script_path: cat
    prokka1:
        module: prokka
        base: merge1
        script_path: {Vars.paths.prokka}
        qsub_params:
            -pe: shared 20
        redirects:
            --cpus: 20
            --force: null
            --genus: Psuedomonas_putida
            --usegenus: null
    mkblst1:
        module: makeblastdb
        base: prokka1
        script_path: {Vars.paths.makeblastdb}
        scope: sample
        redirects:
            -dbtype: prot
    blst_table:
        module: blast
        base: mkblst1
        script_path: {Vars.paths.tblastn}
        qsub_params:
            -pe: shared 20
            queue: ess_all.q
        fasta2use: prot
        scope: sample
        redirects:
            -evalue: 0.0001
            -num_descriptions: 20
            -num_threads: 20
            -outfmt: '"6 qseqid sallseqid qlen slen qstart qend sstart send length
                evalue bitscore score pident qframe"'
            -query: {Vars.databases.gene_list.fasta}
    parse_blast_table:
        module: parse_blast
        base: blst_table
        script_path: {Vars.paths.parse_blast}
        blast_merge_path: '{Vars.paths.compare_blast_parsed_reports} --variable evalue --full_txt_output'
        scope: sample
        redirects:
            --columns2keep: '"group name accession qseqid sallseqid evalue bitscore
                score pident coverage align_len"'
            --dbtable: {Vars.databases.gene_list.table}
            --group_dif_name: # See parse_blast.R documentation for how this is to be specified
            --max_evalue: 1e-7
            --merge_blast: qseqid
            --merge_metadata: # See parse_blast.R documentation for how this is to be specified
            --min_align_len: 30
            --min_coverage: 60
            --names: '"qseqid sallseqid qlen slen qstart qend sstart send length evalue
                bitscore score pident qframe"'
            --num_hits: 1
